<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volumen & Masse - Chemie Lern-App</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        /* Custom Range Slider Styling */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #ea580c; margin-top: -6px; cursor: pointer; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #fed7aa; border-radius: 2px; }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-orange-50 text-gray-900 min-h-screen font-sans">
    <div id="root"></div>

    <script type="text/babel">
        // --- 1. GLOBALS & UTILS ---
        const { useState, useEffect, useMemo } = React;
        
        // --- 2. ICONS ---
        const IconFlask = ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M10 2v7.31L6 14v6c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2v-6l-4-4.69V2h-4z"></path><path d="M8.5 2h7"></path><path d="M14 14l-2 2"></path></svg>;
        const IconCheck = ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 6L9 17l-5-5"></path></svg>;
        const IconArrowRight = ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M5 12h14"></path><path d="M12 5l7 7-7 7"></path></svg>;
        const IconInfo = ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>;
        const IconRefresh = ({className}) => <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>;

        // --- CHEMIE DATEN & LOGIK ---
        
        // Atomgewichte
        const ATOM_MASS = { H: 1, C: 12, N: 14, O: 16, F: 19, S: 32, Cl: 35.5 };
        
        // Farben und Größen für SVG-Darstellung
        const ATOM_STYLES = {
            H: { color: '#e5e7eb', stroke: '#9ca3af', r: 10 }, // Weiß/Grau
            C: { color: '#374151', stroke: '#000000', r: 14 }, // Schwarz
            N: { color: '#3b82f6', stroke: '#1d4ed8', r: 14 }, // Blau
            O: { color: '#ef4444', stroke: '#b91c1c', r: 14 }, // Rot
            F: { color: '#86efac', stroke: '#16a34a', r: 13 }, // Hellgrün
            S: { color: '#fde047', stroke: '#eab308', r: 16 }, // Gelb
            Cl: { color: '#22c55e', stroke: '#15803d', r: 17 } // Grün
        };

        // Hilfsfunktion: Formel parser (z.B. "H2O" -> {H: 2, O: 1})
        const parseFormula = (formula) => {
            const regex = /([A-Z][a-z]?)(\d*)/g;
            const composition = {};
            let match;
            while ((match = regex.exec(formula)) !== null) {
                const element = match[1];
                const count = match[2] ? parseInt(match[2]) : 1;
                composition[element] = (composition[element] || 0) + count;
            }
            return composition;
        };

        const calculateMolarMass = (formula) => {
            const comp = parseFormula(formula);
            return Object.entries(comp).reduce((acc, [el, count]) => {
                return acc + (ATOM_MASS[el] || 0) * count;
            }, 0);
        };

        // --- DATEN: 12 Reaktionen ---
        const reactionsData = [
            { id: 1, reactants: [{f:'H2', n:1}, {f:'Cl2', n:1}], products: [{f:'HCl', n:2}], info: "Knallgasähnliche Reaktion" },
            { id: 2, reactants: [{f:'H2', n:2}, {f:'O2', n:1}], products: [{f:'H2O', n:2}], info: "Wasserbildung" },
            { id: 3, reactants: [{f:'N2', n:1}, {f:'H2', n:3}], products: [{f:'NH3', n:2}], info: "Ammoniaksynthese" },
            { id: 4, reactants: [{f:'CO', n:2}, {f:'O2', n:1}], products: [{f:'CO2', n:2}], info: "Kohlenmonoxid-Verbrennung" },
            { id: 5, reactants: [{f:'CH4', n:1}, {f:'O2', n:2}], products: [{f:'CO2', n:1}, {f:'H2O', n:2}], info: "Methan-Verbrennung" },
            { id: 6, reactants: [{f:'NO', n:2}, {f:'O2', n:1}], products: [{f:'NO2', n:2}], info: "Stickstoffdioxid-Bildung" },
            { id: 7, reactants: [{f:'SO2', n:2}, {f:'O2', n:1}], products: [{f:'SO3', n:2}], info: "Schwefeltrioxid-Bildung" },
            { id: 8, reactants: [{f:'C2H4', n:1}, {f:'O2', n:3}], products: [{f:'CO2', n:2}, {f:'H2O', n:2}], info: "Ethen-Verbrennung" },
            { id: 9, reactants: [{f:'H2', n:1}, {f:'F2', n:1}], products: [{f:'HF', n:2}], info: "Fluorwasserstoff-Bildung" },
            { id: 10, reactants: [{f:'N2', n:1}, {f:'O2', n:2}], products: [{f:'NO2', n:2}], info: "NO2 aus Elementen" },
            { id: 11, reactants: [{f:'C3H8', n:1}, {f:'O2', n:5}], products: [{f:'CO2', n:3}, {f:'H2O', n:4}], info: "Propan-Verbrennung" },
            { id: 12, reactants: [{f:'CS2', n:1}, {f:'O2', n:3}], products: [{f:'CO2', n:1}, {f:'SO2', n:2}], info: "Schwefelkohlenstoff-Verbrennung" }
        ];

        // --- COMPONENTS ---
        
        // Komponente für tiefgestellte Zahlen in Formeln
        const FormulaText = ({ text }) => {
            return (
                <span>
                    {text.split(/(\d+)/).map((part, index) => 
                        /^\d+$/.test(part) ? <sub key={index} style={{fontSize: '70%'}}>{part}</sub> : part
                    )}
                </span>
            );
        };

        // Zeichnet ein einzelnes Molekül basierend auf der Formel
        const MoleculeSVG = ({ formula, size = 60 }) => {
            const comp = useMemo(() => parseFormula(formula), [formula]);
            
            // Hardcoded layouts für bessere Visualisierung
            // Standard: Zentrales Atom + Satelliten
            const getCoords = () => {
                const atoms = [];
                const keys = Object.keys(comp);
                
                // Einfache Heuristiken für Positionen
                if (keys.length === 1 && comp[keys[0]] === 2) { // H2, O2, N2
                     const el = keys[0];
                     const s = ATOM_STYLES[el];
                     return [
                         { x: 35, y: 50, el }, { x: 65, y: 50, el }
                     ];
                }
                
                // Generischer "Ball" für komplexere Moleküle
                let elementsArray = [];
                Object.entries(comp).forEach(([el, count]) => {
                    for(let i=0; i<count; i++) elementsArray.push(el);
                });

                // Sortiere C, S, N, O nach vorne als Zentralatome, H nach hinten
                elementsArray.sort((a,b) => {
                    if(a === 'H') return 1;
                    if(b === 'H') return -1;
                    return 0;
                });

                if (elementsArray.length === 1) return [{x:50, y:50, el: elementsArray[0]}];

                const center = {x: 50, y: 50};
                const radius = 20;
                
                return elementsArray.map((el, index) => {
                    if (index === 0 && elementsArray.length > 2) return { x: 50, y: 50, el }; // Center
                    
                    const countOuter = elementsArray.length > 2 ? elementsArray.length - 1 : elementsArray.length;
                    const angleStep = (2 * Math.PI) / countOuter;
                    const offsetIndex = elementsArray.length > 2 ? index - 1 : index;
                    const angle = offsetIndex * angleStep - (Math.PI / 2); // Start top
                    
                    // Für 2 Atome (z.B. CO, NO) zentrieren
                    if (elementsArray.length === 2) {
                        return { x: 35 + (index * 30), y: 50, el };
                    }

                    return {
                        x: 50 + radius * Math.cos(angle),
                        y: 50 + radius * Math.sin(angle),
                        el
                    };
                });
            };

            const atomCoords = getCoords();

            return (
                <svg width={size} height={size} viewBox="0 0 100 100" className="overflow-visible">
                    {/* Bindungen (einfach alle zum Zentrum oder sequentiell) */}
                    {atomCoords.length > 1 && atomCoords.map((atom, i) => {
                        if (i === 0 && atomCoords.length > 2) return null; // Center hat keine Linie zu sich selbst
                        const target = atomCoords.length > 2 ? atomCoords[0] : atomCoords[i-1];
                        if (atomCoords.length === 2 && i === 0) return null;

                        return (
                            <line key={`line-${i}`} x1={atom.x} y1={atom.y} x2={target.x} y2={target.y} 
                                stroke="#94a3b8" strokeWidth="4" strokeLinecap="round" />
                        );
                    })}
                    {/* Atome */}
                    {atomCoords.map((atom, i) => {
                        const style = ATOM_STYLES[atom.el] || ATOM_STYLES.C;
                        return (
                            <g key={i}>
                                <circle cx={atom.x} cy={atom.y} r={style.r} fill={style.color} stroke={style.stroke} strokeWidth="2" />
                                <text x={atom.x} y={atom.y} dy="0.3em" textAnchor="middle" fontSize="10" fontWeight="bold" fill={atom.el === 'H' ? '#000' : '#fff'} style={{pointerEvents:'none'}}>
                                    {atom.el}
                                </text>
                            </g>
                        );
                    })}
                </svg>
            );
        };

        // Repräsentiert 1 Volumen (eine Box)
        const ParticleBox = ({ formula, animate = false }) => {
            return (
                <div className={`w-16 h-16 md:w-20 md:h-20 border-2 border-orange-200 bg-white rounded-lg flex items-center justify-center shadow-sm ${animate ? 'animate-fade-in' : ''}`}>
                    <MoleculeSVG formula={formula} size={50} />
                </div>
            );
        };

        // Block für einen Reaktanden oder Produkt
        const SubstanceBlock = ({ formula, coef, setCoef, isProduct, showMass, isInteractive = true }) => {
            const boxes = [];
            for (let i = 0; i < coef; i++) {
                boxes.push(<ParticleBox key={i} formula={formula} animate={true} />);
            }

            const singleMass = calculateMolarMass(formula);
            const totalMass = (singleMass * coef).toFixed(1);

            return (
                <div className="flex flex-col items-center gap-2 p-2 rounded-xl bg-orange-50/50">
                    <div className="text-xl font-bold font-mono text-gray-800 mb-1">
                        <FormulaText text={formula} />
                    </div>
                    
                    <div className="flex flex-wrap justify-center gap-2 max-w-[180px] min-h-[80px]">
                        {boxes}
                    </div>

                    {isInteractive && (
                        <div className="w-full max-w-[120px] mt-2">
                             <input 
                                type="range" 
                                min="1" 
                                max="6" 
                                value={coef} 
                                onChange={(e) => setCoef(parseInt(e.target.value))}
                                className="w-full"
                             />
                             <div className="text-center text-sm font-medium text-orange-700 mt-1">
                                {coef} {coef === 1 ? 'Volumen' : 'Volumina'}
                             </div>
                        </div>
                    )}
                    
                    {!isInteractive && (
                         <div className="text-center text-sm font-bold text-orange-800 mt-2 bg-orange-100 px-3 py-1 rounded-full">
                            {coef} {coef === 1 ? 'Volumen' : 'Volumina'}
                         </div>
                    )}

                    {showMass && (
                        <div className="mt-1 text-xs text-gray-500 bg-white px-2 py-1 rounded border border-gray-100 shadow-sm">
                            {coef} × {singleMass}u = <span className="font-bold text-gray-700">{totalMass} u</span>
                        </div>
                    )}
                </div>
            );
        };

        // --- VIEWS ---

        const IntroView = ({ onStart }) => (
            <div className="space-y-6 animate-fade-in text-center py-10">
                <h2 className="text-3xl font-bold text-orange-700 mb-4">Das Gesetz von Avogadro</h2>
                <div className="max-w-2xl mx-auto bg-orange-100 p-6 rounded-xl border border-orange-200 text-left">
                    <p className="text-lg leading-relaxed text-gray-800">
                        Im Jahr 1811 stellte Amedeo Avogadro eine kühne Hypothese auf:
                    </p>
                    <blockquote className="my-4 p-4 bg-white border-l-4 border-orange-500 italic text-gray-700 shadow-sm">
                        "Gleiche Volumina aller Gase enthalten bei gleicher Temperatur und gleichem Druck die gleiche Anzahl an Teilchen."
                    </blockquote>
                    <p className="text-gray-700">
                        Das bedeutet: Wenn wir wissen, wie viele Teilchen reagieren, wissen wir auch, in welchem Volumenverhältnis die Gase zueinander stehen.
                        <br/><br/>
                        <strong>1 Molekül ≙ 1 Box (Volumeneinheit)</strong>
                    </p>
                </div>
                <button 
                    onClick={onStart}
                    className="mt-8 px-8 py-3 bg-orange-600 hover:bg-orange-700 text-white text-xl font-bold rounded-full shadow-lg transform transition hover:scale-105 flex items-center gap-2 mx-auto"
                >
                    Starten <IconArrowRight className="w-6 h-6" />
                </button>
            </div>
        );

        const LearnView = () => {
            const [reactionScale, setReactionScale] = useState(1);
            
            // Fixes Beispiel: H2 + Cl2 -> 2 HCl
            return (
                <div className="animate-fade-in max-w-4xl mx-auto">
                    <div className="bg-white p-6 rounded-xl border border-orange-100 shadow-sm mb-6">
                        <h3 className="text-xl font-bold text-orange-700 mb-2 flex items-center gap-2">
                            <IconInfo className="w-5 h-5"/> Beispiel: Chlorwasserstoff-Bildung
                        </h3>
                        <p className="text-gray-600 mb-4">
                            Beobachte, wie sich das Volumen ändert, wenn wir mehr Teilchen reagieren lassen.
                            Das Verhältnis der Volumina (Boxen) entspricht exakt den Koeffizienten in der Reaktionsgleichung.
                        </p>

                        <div className="mb-8">
                            <label className="block text-sm font-medium text-gray-700 mb-2">Reaktions-Umsatz: {reactionScale}x</label>
                            <input 
                                type="range" min="1" max="4" value={reactionScale} 
                                onChange={(e) => setReactionScale(parseInt(e.target.value))}
                                className="w-full max-w-md h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                            />
                            <div className="flex justify-between text-xs text-gray-400 max-w-md mt-1 px-1">
                                <span>1x</span><span>2x</span><span>3x</span><span>4x</span>
                            </div>
                        </div>

                        <div className="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8 bg-gray-50 p-6 rounded-2xl">
                            {/* Edukte */}
                            <div className="flex gap-4">
                                <SubstanceBlock formula="H2" coef={1 * reactionScale} isProduct={false} showMass={false} isInteractive={false} />
                                <div className="self-center text-3xl text-gray-400 font-light">+</div>
                                <SubstanceBlock formula="Cl2" coef={1 * reactionScale} isProduct={false} showMass={false} isInteractive={false} />
                            </div>
                            
                            {/* Pfeil */}
                            <div className="self-center transform rotate-90 md:rotate-0">
                                <IconArrowRight className="w-10 h-10 text-orange-500" />
                            </div>

                            {/* Produkt */}
                            <div>
                                <SubstanceBlock formula="HCl" coef={2 * reactionScale} isProduct={true} showMass={false} isInteractive={false} />
                            </div>
                        </div>
                        
                        <div className="mt-6 text-center text-gray-700 bg-orange-50 p-3 rounded-lg border border-orange-100">
                            Verhältnis: <span className="font-bold text-orange-700">{1 * reactionScale}</span> : <span className="font-bold text-orange-700">{1 * reactionScale}</span> &rarr; <span className="font-bold text-orange-700">{2 * reactionScale}</span>
                        </div>
                    </div>
                </div>
            );
        };

        const PracticeView = ({ reaction, onNext }) => {
            // Initialzustand: Alle Koeffizienten auf 1
            const [coefs, setCoefs] = useState({});
            const [status, setStatus] = useState(null); // null, 'correct', 'wrong'
            const [showMass, setShowMass] = useState(false);

            useEffect(() => {
                // Reset bei neuer Aufgabe
                const initCoefs = {};
                reaction.reactants.forEach(r => initCoefs[r.f] = 1);
                reaction.products.forEach(p => initCoefs[p.f] = 1);
                setCoefs(initCoefs);
                setStatus(null);
                setShowMass(false);
            }, [reaction]);

            const updateCoef = (formula, val) => {
                setCoefs(prev => ({...prev, [formula]: val}));
                setStatus(null); // Reset feedback on change
            };

            const checkAnswer = () => {
                let isCorrect = true;
                // Check Reactants
                reaction.reactants.forEach(r => {
                    if (coefs[r.f] !== r.n) isCorrect = false;
                });
                // Check Products
                reaction.products.forEach(p => {
                    if (coefs[p.f] !== p.n) isCorrect = false;
                });

                setStatus(isCorrect ? 'correct' : 'wrong');
            };

            if (!reaction) return <div>Laden...</div>;

            return (
                <div className="animate-fade-in pb-12">
                    {/* Status Bar */}
                    <div className="flex justify-between items-center mb-6 bg-orange-50 p-3 rounded-lg">
                        <span className="text-orange-800 font-bold">Aufgabe {reaction.id} von {reactionsData.length}</span>
                        <div className="text-sm text-gray-600 italic">{reaction.info}</div>
                    </div>

                    {/* Checkbox Mass Toggle */}
                    <div className="flex justify-end mb-4">
                        <label className="flex items-center gap-2 text-sm text-gray-700 cursor-pointer select-none">
                            <input type="checkbox" checked={showMass} onChange={e => setShowMass(e.target.checked)} className="w-4 h-4 text-orange-600 rounded focus:ring-orange-500" />
                            Massenverhältnisse anzeigen (u)
                        </label>
                    </div>

                    {/* Reaktionsbereich */}
                    <div className="flex flex-col xl:flex-row items-center justify-center gap-4 xl:gap-8 mb-8">
                        
                        {/* Edukte */}
                        <div className="flex flex-wrap justify-center gap-4">
                            {reaction.reactants.map((r, idx) => (
                                <React.Fragment key={r.f}>
                                    <SubstanceBlock 
                                        formula={r.f} 
                                        coef={coefs[r.f] || 1} 
                                        setCoef={(v) => updateCoef(r.f, v)} 
                                        isProduct={false} 
                                        showMass={showMass} 
                                    />
                                    {idx < reaction.reactants.length - 1 && (
                                        <div className="self-center text-3xl text-gray-400 font-light">+</div>
                                    )}
                                </React.Fragment>
                            ))}
                        </div>

                        {/* Pfeil */}
                        <div className="self-center transform rotate-90 xl:rotate-0 py-4">
                            <IconArrowRight className="w-12 h-12 text-orange-600" />
                        </div>

                        {/* Produkte */}
                        <div className="flex flex-wrap justify-center gap-4">
                            {reaction.products.map((p, idx) => (
                                <React.Fragment key={p.f}>
                                    <SubstanceBlock 
                                        formula={p.f} 
                                        coef={coefs[p.f] || 1} 
                                        setCoef={(v) => updateCoef(p.f, v)} 
                                        isProduct={true} 
                                        showMass={showMass} 
                                    />
                                    {idx < reaction.products.length - 1 && (
                                        <div className="self-center text-3xl text-gray-400 font-light">+</div>
                                    )}
                                </React.Fragment>
                            ))}
                        </div>
                    </div>

                    {/* Controls */}
                    <div className="flex flex-col items-center gap-4">
                        {status === 'wrong' && (
                            <div className="bg-red-100 text-red-700 px-4 py-2 rounded-lg flex items-center gap-2 animate-bounce">
                                <IconInfo className="w-5 h-5" />
                                Die Atome sind auf beiden Seiten noch nicht ausgeglichen!
                            </div>
                        )}
                        {status === 'correct' && (
                            <div className="bg-green-100 text-green-700 px-6 py-3 rounded-lg flex items-center gap-2 text-lg font-bold animate-pulse">
                                <IconCheck className="w-6 h-6" />
                                Richtig! Das Volumenverhältnis stimmt.
                            </div>
                        )}

                        {status !== 'correct' ? (
                            <button 
                                onClick={checkAnswer}
                                className="px-8 py-3 bg-gray-800 hover:bg-gray-900 text-white font-bold rounded-lg shadow-md transition transform active:scale-95"
                            >
                                Prüfen
                            </button>
                        ) : (
                            <button 
                                onClick={onNext}
                                className="px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg shadow-md transition transform hover:scale-105 flex items-center gap-2"
                            >
                                Nächste Aufgabe <IconArrowRight className="w-5 h-5" />
                            </button>
                        )}
                    </div>
                </div>
            );
        };

        const FinishScreen = ({ onRestart }) => (
            <div className="text-center py-12 animate-fade-in">
                <div className="inline-block p-4 bg-green-100 rounded-full text-green-600 mb-6">
                    <IconCheck className="w-16 h-16" />
                </div>
                <h2 className="text-3xl font-bold text-gray-800 mb-4">Großartig!</h2>
                <p className="text-gray-600 mb-8 text-lg">Du hast alle Reaktionsgleichungen erfolgreich ausgeglichen und das Gesetz von Avogadro angewendet.</p>
                <button 
                    onClick={onRestart}
                    className="px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-bold inline-flex items-center gap-2"
                >
                    <IconRefresh className="w-5 h-5" /> Neustarten
                </button>
            </div>
        );

        // --- 3. HAUPTKOMPONENTE ---
        const App = () => {
             const [view, setView] = useState('intro'); // intro, learn, practice, finish
             const [currentExIndex, setCurrentExIndex] = useState(0);

             // Error Boundary simuliert durch try/catch im Logic-Flow nicht nötig, 
             // da React 18 robust ist, aber wir achten auf saubere Props.

             const handleNext = () => {
                 if (currentExIndex < reactionsData.length - 1) {
                     setCurrentExIndex(prev => prev + 1);
                 } else {
                     setView('finish');
                 }
             };

             const handleRestart = () => {
                 setCurrentExIndex(0);
                 setView('intro');
             };
             
             return (
                 <div className="max-w-5xl mx-auto p-4 md:p-6 bg-white shadow-2xl min-h-screen md:min-h-auto md:my-8 md:rounded-2xl border-t-8 border-orange-600">
                    
                    {/* Header */}
                    <header className="flex flex-col sm:flex-row justify-between items-center mb-8 border-b pb-4 gap-4">
                        <div className="flex items-center gap-3">
                            <div className="bg-orange-100 p-2 rounded-lg text-orange-600 shadow-sm"><IconFlask className="w-8 h-8" /></div>
                            <div>
                                <h1 className="text-xl md:text-2xl font-bold text-gray-800 leading-tight">Volumen & Masse</h1>
                                <p className="text-xs text-orange-600 font-medium tracking-wide uppercase">Gesetz von Avogadro</p>
                            </div>
                        </div>
                        <div className="flex gap-2 text-sm bg-gray-50 p-1 rounded-lg">
                            <button onClick={() => setView('intro')} className={`px-4 py-2 rounded-md transition-all ${view === 'intro' ? 'bg-white text-orange-700 shadow font-bold' : 'text-gray-500 hover:text-gray-700'}`}>Start</button>
                            <button onClick={() => setView('learn')} className={`px-4 py-2 rounded-md transition-all ${view === 'learn' ? 'bg-white text-orange-700 shadow font-bold' : 'text-gray-500 hover:text-gray-700'}`}>Lernen</button>
                            <button onClick={() => setView('practice')} className={`px-4 py-2 rounded-md transition-all ${view === 'practice' || view === 'finish' ? 'bg-white text-orange-700 shadow font-bold' : 'text-gray-500 hover:text-gray-700'}`}>Üben</button>
                        </div>
                    </header>

                    {/* Inhalt rendern je nach View */}
                    <main className="min-h-[400px]">
                        {view === 'intro' && <IntroView onStart={() => setView('learn')} />}
                        
                        {view === 'learn' && <LearnView />}
                        
                        {view === 'practice' && (
                            <PracticeView 
                                reaction={reactionsData[currentExIndex]} 
                                onNext={handleNext} 
                            />
                        )}

                        {view === 'finish' && <FinishScreen onRestart={handleRestart} />}
                    </main>
                    
                    {/* Footer / Copyright */}
                    <footer className="mt-12 pt-6 border-t border-gray-100 text-center text-gray-400 text-xs">
                        <p>© 2023 Chemie Lern-App • Gesetz von Avogadro • Klasse 9</p>
                    </footer>
                 </div>
             );
        };

        // --- 4. RENDER ---
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>